(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50ea480b"],{"3fd8":function(e,t,r){},"51e8":function(e,t,r){"use strict";var s=r("3fd8"),o=r.n(s);o.a},afd5:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:16}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-avatar",{attrs:{size:100,fit:"cover",src:e.avatar||e.url},on:{click:function(t){return e.toggleShow()}}}),e._v(" "),r("p",{on:{click:function(t){return e.toggleShow()}}},[e._v("点击切换头像")])],1)])],1),e._v(" "),r("el-form",{ref:"user",staticClass:"demo-ruleForm",attrs:{model:e.user,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"昵称",prop:"userNick"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.user.nickName,callback:function(t){e.$set(e.user,"nickName",t)},expression:"user.nickName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"userEmail"}},[r("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.user.userEmail,callback:function(t){e.$set(e.user,"userEmail",t)},expression:"user.userEmail"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"userPhone"}},[r("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.user.userPhone,callback:function(t){e.$set(e.user,"userPhone",t)},expression:"user.userPhone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.user.checkPass,callback:function(t){e.$set(e.user,"checkPass",t)},expression:"user.checkPass"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("user")}}},[e._v("提交")])],1)],1),e._v(" "),r("div",{staticClass:"myUpload"},[r("my-upload",{attrs:{field:"file",url:e.action,"img-format":"png"},on:{"crop-success":e.cropSuccess,"crop-upload-success":e.cropUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)],1)},o=[],n=(r("5ab2"),r("6d57"),r("e10e"),r("b449"),r("17d6")),c=r("b081"),a=(r("9f45"),r("c24f")),u=r("663a"),i=r("52c1");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(c["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={components:{myUpload:u["a"]},computed:p({},Object(i["b"])(["avatar"])),data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.user.checkPass&&e.$refs.user.validateField("checkPass"),s())},r=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.user.password?s(new Error("两次输入密码不一致!")):s()};return{url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",drawer:!0,direction:"rtl",action:"",show:!1,user:{nickName:"",userEmail:"",userPhone:"",password:"",checkPass:"",userAvatar:""},rules:{password:[{validator:t,trigger:"blur"}],checkPass:[{validator:r,trigger:"blur"}]}}},mounted:function(){this.action=window.location.protocol+"//"+window.location.host+"/electronic/file/uploadFile",this.queryUserInfo()},methods:{toggleShow:function(){this.show=!0},cropSuccess:function(e,t){console.log("-------- crop success --------"),this.imgDataUrl=e},cropUploadSuccess:function(e,t){console.log("-------- upload success --------"),console.log(e),console.log("field: "+t),this.user.userAvatar=e.result.fileDownloadUri,this.$store.commit("user/SET_AVATAR",e.result.fileDownloadUri),this.show=!1},cropUploadFail:function(e,t){console.log("-------- upload fail --------"),console.log(e),console.log("field: "+t)},queryUserInfo:function(){var e=this;Object(a["c"])({}).then((function(t){e.$loading().close(),t.success&&(e.user=t.result)}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$confirm("确定提交修改吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.submit()}))}))},submit:function(){var e=this;Object(a["i"])({userId:this.user.userId,userAvatar:this.user.userAvatar,userEmail:this.user.userEmail,userPhone:this.user.userPhone,password:this.user.password,nickName:this.user.nickName}).then((function(t){e.$loading().close(),t.success&&(e.$message({type:"success",message:"操作成功"}),e.open())}))},open:function(){var e=this;this.$alert("请退出重新登陆！","退出登录",{confirmButtonText:"确定",callback:function(t){e.logout()}})},logout:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("user/logout");case 2:this.$router.push("/login");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=f,m=(r("51e8"),r("e90a")),h=Object(m["a"])(d,s,o,!1,null,null,null);t["default"]=h.exports}}]);